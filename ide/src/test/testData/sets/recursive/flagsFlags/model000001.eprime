language ESSENCE' 1.0

find x: int(1..9)
find y: int(1..9)
find z: int(1..9)
find s_ExplicitVarSizeWithFlagsR4_Flags: matrix indexed by [int(1..2)] of bool
find s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags:
        matrix indexed by [int(1..2), int(1..2)] of bool
find s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Values:
        matrix indexed by [int(1..2), int(1..2)] of int(1..3)
branching on
    [x, y, z, s_ExplicitVarSizeWithFlagsR4_Flags, s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags,
     s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Values]
such that
    sum([toInt(s_ExplicitVarSizeWithFlagsR4_Flags[q15] /\
               s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[q15, q16])
         * catchUndef(s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Values[q15, q16], 0)
             | q15 : int(1..2), q16 : int(1..2)])
    = x + y + z,
    s_ExplicitVarSizeWithFlagsR4_Flags[2] ->
    s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[1, ..] <lex
    s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[2, ..]
    \/
    and([s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[1, q11] =
         s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[2, q11]
             | q11 : int(1..2)])
    /\
    s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Values[1, ..] <lex
    s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Values[2, ..],
    and([s_ExplicitVarSizeWithFlagsR4_Flags[q2] = false ->
         and([s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[q2, q13] = false | q13 : int(1..2)]) /\
         and([s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Values[q2, q14] = 1 | q14 : int(1..2)])
             | q2 : int(1..2)]),
    s_ExplicitVarSizeWithFlagsR4_Flags[2] -> s_ExplicitVarSizeWithFlagsR4_Flags[1],
    sum([toInt(s_ExplicitVarSizeWithFlagsR4_Flags[q4]) | q4 : int(1..2)]) <= 2,
    and([s_ExplicitVarSizeWithFlagsR4_Flags[q5] ->
         (s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[q5, 2] ->
          s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Values[q5, 1] <
          s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Values[q5, 2])
             | q5 : int(1..2)]),
    and([s_ExplicitVarSizeWithFlagsR4_Flags[q5] ->
         and([s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[q5, q7] = false ->
              s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Values[q5, q7] = 1
                  | q7 : int(1..2)])
             | q5 : int(1..2)]),
    and([s_ExplicitVarSizeWithFlagsR4_Flags[q5] ->
         (s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[q5, 2] ->
          s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[q5, 1])
             | q5 : int(1..2)]),
    and([s_ExplicitVarSizeWithFlagsR4_Flags[q5] ->
         sum([toInt(s_ExplicitVarSizeWithFlagsR4_Values_ExplicitVarSizeWithFlags_Flags[q5, q9]) | q9 : int(1..2)]) <= 2
             | q5 : int(1..2)])

$ Conjure's
$ {"finds": [{"Name": "x"}, {"Name": "y"}, {"Name": "z"}, {"Name": "s"}],
$  "givens": [],
$  "enumGivens": [],
$  "enumLettings": [],
$  "lettings": [],
$  "unnameds": [],
$  "strategyQ": {"PickFirst": []},
$  "strategyA": {"Auto": {"Interactive": []}},
$  "trailCompact":
$      [[1, 8, 8], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 8, 8], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1]],
$  "trailVerbose": [],
$  "trailRewrites": [],
$  "nameGenState": [["q", 17]],
$  "nbExtraGivens": 0,
$  "representations":
$      [[{"Name": "s"},
$        {"DomainSet":
$             [{"Set_ExplicitVarSizeWithFlags": []}, {"SizeAttr_MaxSize": {"Constant": {"ConstantInt": 2}}},
$              {"DomainSet":
$                   [{"Set_ExplicitVarSizeWithFlags": []}, {"SizeAttr_MaxSize": {"Constant": {"ConstantInt": 2}}},
$                    {"DomainInt":
$                         [{"RangeBounded": [{"Constant": {"ConstantInt": 1}}, {"Constant": {"ConstantInt": 3}}]}]}]}]}],
$       [{"Name": "x"},
$        {"DomainInt": [{"RangeBounded": [{"Constant": {"ConstantInt": 1}}, {"Constant": {"ConstantInt": 9}}]}]}],
$       [{"Name": "y"},
$        {"DomainInt": [{"RangeBounded": [{"Constant": {"ConstantInt": 1}}, {"Constant": {"ConstantInt": 9}}]}]}],
$       [{"Name": "z"},
$        {"DomainInt": [{"RangeBounded": [{"Constant": {"ConstantInt": 1}}, {"Constant": {"ConstantInt": 9}}]}]}]],
$  "representationsTree":
$      [[{"Name": "s"},
$        [{"rootLabel": {"Set_ExplicitVarSizeWithFlags": []},
$          "subForest":
$              [{"rootLabel": {"Set_ExplicitVarSizeWithFlags": []},
$                "subForest":
$                    [{"rootLabel": null,
$                      "subForest": []}]}]}]],
$       [{"Name": "x"},
$        [{"rootLabel": null,
$          "subForest": []}]],
$       [{"Name": "y"},
$        [{"rootLabel": null,
$          "subForest": []}]],
$       [{"Name": "z"},
$        [{"rootLabel": null,
$          "subForest": []}]]],
$  "originalDomains":
$      [[{"Name": "x"},
$        {"DomainInt": [{"RangeBounded": [{"Constant": {"ConstantInt": 1}}, {"Constant": {"ConstantInt": 9}}]}]}],
$       [{"Name": "y"},
$        {"DomainInt": [{"RangeBounded": [{"Constant": {"ConstantInt": 1}}, {"Constant": {"ConstantInt": 9}}]}]}],
$       [{"Name": "z"},
$        {"DomainInt": [{"RangeBounded": [{"Constant": {"ConstantInt": 1}}, {"Constant": {"ConstantInt": 9}}]}]}],
$       [{"Name": "s"},
$        {"DomainSet":
$             [[], {"SizeAttr_MaxSize": {"Constant": {"ConstantInt": 2}}},
$              {"DomainSet":
$                   [[], {"SizeAttr_MaxSize": {"Constant": {"ConstantInt": 2}}},
$                    {"DomainInt":
$                         [{"RangeBounded": [{"Constant": {"ConstantInt": 1}}, {"Constant": {"ConstantInt": 3}}]}]}]}]}]],
$  "questionAnswered": []}
